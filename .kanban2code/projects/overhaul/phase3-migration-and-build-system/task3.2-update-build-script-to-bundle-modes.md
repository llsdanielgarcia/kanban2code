---
stage: audit
tags: [feature, p1]
agent: auditor
contexts: []
---

# Update build script to bundle `_modes/`

## Goal
Extend the build script to generate bundled mode files from `_modes/` directory.

## Definition of Done
- [x] `generateBundledContent()` in `build.ts` also reads `.kanban2code/_modes/` directory
- [x] Generates `src/assets/modes.ts` with `BUNDLED_MODES: Record<string, string>`
- [x] `BUNDLED_AGENTS` continues to be generated (now with CLI config files after migration)

## Files
- `build.ts` - modify - add `_modes/` reading to `generateBundledContent()`
- `src/assets/modes.ts` - create (auto-generated by build)

## Tests
- [x] Build completes without errors
- [x] `BUNDLED_MODES` contains expected mode files (coder.md, auditor.md, planner.md, etc.)

## Context
The build script already generates `BUNDLED_AGENTS` from `_agents/` directory. This task extends it to also generate `BUNDLED_MODES` from `_modes/` directory. Both are bundled into the extension assets for distribution.

After migration, `_modes/` will contain behavioral instruction files (coder.md, auditor.md, planner.md, etc.) that need to be bundled.

## Audit
- `build.ts`
- `src/assets/modes.ts` (auto-generated)
