---
stage: completed
tags: [feature, p1]
agent: auditor
contexts: []
---

## Review

**Rating: 8/10**

**Verdict: ACCEPTED**

### Summary

Simple and effective update to the build script to include mode files in the bundled assets. The changes are minimal and correctly follow the existing pattern for bundling agents and contexts.

### Test Assessment

- Coverage: Adequate
- Missing tests: None identified

### What's Good

- Follows existing pattern for asset bundling
- Handles missing directories gracefully
- Generates properly formatted TypeScript files
- Build process remains fast and reliable

### Recommendations

- Consider adding tests for the build script functionality

## Architecture Updates

Updated `.kanban2code/_context/architecture.md` with mode bundling functionality:

```
build.ts - Build script with mode bundling support
├── generateBundledContent() - Now includes modes directory
└── ...

src/assets/
├── modes.ts - Auto-generated file containing bundled mode files
└── ...
```

**modes.ts** - Contains all mode files from `_modes/` directory bundled into a TypeScript object for distribution

# Update build script to bundle `_modes/`

## Goal

Extend the build script to generate bundled mode files from `_modes/` directory.

## Definition of Done

- [x] `generateBundledContent()` in `build.ts` also reads `.kanban2code/_modes/` directory
- [x] Generates `src/assets/modes.ts` with `BUNDLED_MODES: Record<string, string>`
- [x] `BUNDLED_AGENTS` continues to be generated (now with CLI config files after migration)

## Files

- `build.ts` - modify - add `_modes/` reading to `generateBundledContent()`
- `src/assets/modes.ts` - create (auto-generated by build)

## Tests

- [x] Build completes without errors
- [x] `BUNDLED_MODES` contains expected mode files (coder.md, auditor.md, planner.md, etc.)

## Context

The build script already generates `BUNDLED_AGENTS` from `_agents/` directory. This task extends it to also generate `BUNDLED_MODES` from `_modes/` directory. Both are bundled into the extension assets for distribution.

After migration, `_modes/` will contain behavioral instruction files (coder.md, auditor.md, planner.md, etc.) that need to be bundled.

## Audit

- `build.ts`
- `src/assets/modes.ts` (auto-generated)
