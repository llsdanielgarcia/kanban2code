---
stage: audit
created: 2026-02-12T22:14:31.568Z
agent: auditor
---

# Fix CLI trigger

when I click on the column arrow, nothing happens, nto sure if I need to configure something else, let's do one at a time, i want to fix the kimi provider first. 

## Refined Prompt
Objective: Fix the column runner buttons in Board view by wiring missing props to BoardHorizontal component.

Implementation approach:
1. Add runner-related props to BoardHorizontal component call in Board.tsx
2. Create handler functions for RunTopTask, RunColumn, StopRunner, and RunTask messages
3. Pass isRunnerActive and activeRunnerTaskId from useTaskData hook

Key decisions:
- Use existing postMessage pattern: The Board component already has a postMessage helper function that sends messages to the extension host
- Match SidebarProvider message handling: The extension already handles RunColumn, RunTask, and StopRunner messages in SidebarProvider.ts (lines 464-482)

Edge cases:
- Runner buttons should be disabled when isRunnerActive is true (already handled in Column.tsx)
- Stop button should only appear when isRunnerActive is true (already handled in Column.tsx)

## Context
### Relevant Code
- [`src/webview/ui/components/Board.tsx:287-298`](src/webview/ui/components/Board.tsx:287-298) - BoardHorizontal component call missing runner props
- [`src/webview/ui/components/BoardHorizontal.tsx:10-15`](src/webview/ui/components/BoardHorizontal.tsx:10-15) - Interface defines runner props that Board.tsx should pass
- [`src/webview/ui/components/Column.tsx:79-112`](src/webview/ui/components/Column.tsx:79-112) - Runner controls UI that calls onRunColumn and onRunTopTask
- [`src/webview/ui/hooks/useTaskData.ts:66-67`](src/webview/ui/hooks/useTaskData.ts:66-67) - isRunnerActive and activeRunnerTaskId available from hook
- [`src/webview/SidebarProvider.ts:472-482`](src/webview/SidebarProvider.ts:472-482) - Extension-side message handlers for RunColumn, RunTask, StopRunner

### Patterns to Follow
- Use postMessage helper function at top of Board.tsx to send messages
- Message types: RunTopTask, RunColumn, StopRunner, RunTask
- Payload format matches SidebarProvider expectations: { stage?: Stage } or { taskId?: string }

### Test Patterns
- Manual testing: Click ▶ and ▶▶ buttons in plan/code/audit columns
- Verify buttons are disabled when runner is active
- Verify stop button appears when runner is active

### Dependencies
- useTaskData hook already provides isRunnerActive and activeRunnerTaskId
- postMessage function already exists in Board.tsx
- Extension handlers already exist in SidebarProvider.ts

### Gotchas
- BoardHorizontal expects onRunTopTask, onRunColumn, onStopRunner, onRunTask, isRunnerActive, runningTaskId props
- The props are optional (marked with ?) so TypeScript won't catch missing props at compile time
- BoardSwimlane also needs the same runner props for consistency 
